steps:
- name: 'gcr.io/cloud-builders/docker'
  args: [
      'build',
      '-t',
      'us-central1-docker.pkg.dev/$PROJECT_ID/cloud-run-source-deploy/architect-prime-backend:$COMMIT_SHA',
      '.'
    ]
  id: Build
- name: 'gcr.io/cloud-builders/docker'
  args: [
      'push',
      'us-central1-docker.pkg.dev/$PROJECT_ID/cloud-run-source-deploy/architect-prime-backend:$COMMIT_SHA'
    ]
  id: Push
- name: 'gcr.io/cloud-builders/gcloud'
  args: [
      'run',
      'deploy',
      'architect-prime-backend',
      '--image',
      'us-central1-docker.pkg.dev/$PROJECT_ID/cloud-run-source-deploy/architect-prime-backend:$COMMIT_SHA',
      '--region',
      'us-central1',
      '--allow-unauthenticated',
      '--platform',
      'managed'
    ]
  id: Deploy
options:
  logging: CLOUD_LOGGING_ONLY
# BUILD FORCE LINE
